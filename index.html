<html>
  <head>
    <title>
      Just rest a while
    </title>
    <style>

      html, body {
        margin: 0;
        padding: 0;
      }
      
      #container {
        position: relative;
        font-size: 0;
        width: 100%;
        height: 100%;
        border: none;
        background-color: black;
      }

      .slide {
        border: none;
        opacity: 0;
        position: absolute;
        background-color: black;
        top: 0;
        left: 0;
        object-fit: cover;
        width: 100%; height: 100%;
        -webkit-transition: opacity 1s ease-in-out;
        -moz-transition: opacity 1s ease-in-out;
        -o-transition: opacity 1s ease-in-out;
        transition: opacity 1s ease-in-out;
      }

      .showMe {
        opacity: 1;
      }
  </style></head>
  <body>
    <div id="container">
      <img id="a" class="slide showMe" src="img/b_0.jpg">
      <img id="b" class="slide" src="img/b_1.jpg">
    </div>
  
    <script>      
      var page = "a";
      var next = "b";
      var start = 0;
      var end = 63;
      var base = "img/b_";

      var i = start;

      setTimeout(() => nextImage(), 4000);

      document.addEventListener("keydown", function(e) {
        toggleFullScreen();
      }, false);

      function toggleFullScreen() {
        if (!document.fullscreenElement) {
          document.documentElement.requestFullscreen();
        } else if (document.exitFullscreen) {
          document.exitFullscreen();
        }
      }

      function getRandomInt(max) {
        return Math.floor(Math.random() * max);
      }

      function nextImage() {
        // TODO: switch to portrait images.
        //if (window.innerHeight > window.innerWidth){
        //    removeClass(document.getElementById("message"), "messageOff");
        //} else {
        //    addClass(document.getElementById("message"), "messageOff");
        //}
        if (page == "b") {
          next = "a";
        } else {
          next = "b";
        }
        i = i + 1;
        if (i > end) {
          i = start;
        }
        document.getElementById(next).addEventListener('load', doNext)
        document.getElementById(next).src = base + i + ".jpg";
      }
      
      function doNext() {
          e = document.getElementById(page);
          removeClass(e, "showMe");
          e = document.getElementById(next);
          addClass(e, "showMe");
          page = next;
          setTimeout(() => nextImage(), 6000);
      }
      
      function addClass(elem, name) {
        var c = elem.className;
        if (c.includes(name)) {
          return;
        }
        if (c) c += " ";
        c += name;
        elem.className = c;
      }

      function removeClass(elem, name) {
        var c = elem.className;
        elem.className = c.replace(name, "").replace(/   /g, " ").replace(/^ | $/g, "");
      }
    </script>
  </body>
</html>
